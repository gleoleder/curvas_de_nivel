<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Curvas de Nivel y Terreno 3D Interactivo</title>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Space+Grotesk:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    
    <!-- Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <div class="logo-icon">üèîÔ∏è</div>
        <h1>Curvas de Nivel</h1>
        <p class="subtitle">Visualizaci√≥n Topogr√°fica Interactiva 3D</p>
    </header>

    <nav>
        <button class="active" onclick="showSection('interactive')">
            ‚ú® Visualizaci√≥n Interactiva
        </button>
        <button onclick="showSection('theory')">
            üìö Teor√≠a Completa
        </button>
    </nav>

    <main>
        <!-- Interactive Section -->
        <section id="interactive" class="active">
            <div class="controls">
                <div class="control-group">
                    <label>Tipo de Terreno</label>
                    <select id="terrainType" onchange="updateTerrain()">
                        <optgroup label="Terrenos B√°sicos">
                            <option value="mountain">üèîÔ∏è Monta√±a C√≥nica</option>
                            <option value="valley">üèûÔ∏è Valle</option>
                            <option value="ridge">‚õ∞Ô∏è Cordillera</option>
                            <option value="crater">üåã Cr√°ter</option>
                            <option value="hills">üåÑ Colinas M√∫ltiples</option>
                            <option value="plateau">üèúÔ∏è Meseta</option>
                            <option value="canyon">üóª Ca√±√≥n</option>
                            <option value="volcanic">üåã Terreno Volc√°nico</option>
                        </optgroup>
                        <optgroup label="Terrenos Avanzados">
                            <option value="archipelago">üèùÔ∏è Archipi√©lago</option>
                            <option value="glacier">‚ùÑÔ∏è Valle Glaciar</option>
                            <option value="karst">ü™® Terreno K√°rstico</option>
                            <option value="dunes">üèúÔ∏è Campo de Dunas</option>
                            <option value="fjord">üåä Fiordo</option>
                            <option value="caldera">üî• Caldera Volc√°nica</option>
                            <option value="badlands">üèöÔ∏è Badlands</option>
                            <option value="terraces">üåæ Terrazas Agr√≠colas</option>
                        </optgroup>
                    </select>
                </div>
                <div class="control-group">
                    <label>Intervalo de Curvas</label>
                    <select id="contourInterval" onchange="updateTerrain()">
                        <option value="10">10 metros</option>
                        <option value="20" selected>20 metros</option>
                        <option value="50">50 metros</option>
                        <option value="100">100 metros</option>
                    </select>
                </div>
                <div class="control-group">
                    <label>Altura M√°xima: <span id="heightValue">200</span>m</label>
                    <input type="range" id="maxHeight" min="100" max="500" value="200" onchange="updateTerrain()">
                </div>
                <div class="control-group">
                    <label>Exageraci√≥n Vertical 3D: <span id="exagValue">1.5</span>x</label>
                    <input type="range" id="verticalExag" min="0.5" max="3" step="0.1" value="1.5" onchange="update3DExaggeration()">
                </div>
            </div>

            <div class="viz-container">
                <div class="viz-panel">
                    <h3>
                        <span class="icon">üìç</span>
                        Vista en Planta - Curvas de Nivel
                    </h3>
                    <div class="instructions">
                        <strong>üñ±Ô∏è Interacci√≥n:</strong> Haz clic y arrastra para dibujar una l√≠nea de perfil. 
                        La l√≠nea indica el corte que se visualizar√° en el perfil topogr√°fico.
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="canvas2d"></canvas>
                    </div>
                    <div class="legend" id="legend2d"></div>
                    <div class="profile-indicator">
                        <div class="line-sample"></div>
                        <span>L√≠nea de perfil (arrastrar para definir)</span>
                    </div>
                </div>

                <div class="viz-panel">
                    <h3>
                        <span class="icon">üìä</span>
                        Perfil Topogr√°fico
                    </h3>
                    <div class="info-box">
                        El perfil muestra la elevaci√≥n del terreno a lo largo de la l√≠nea de corte definida 
                        en la vista en planta. Las curvas de nivel se proyectan verticalmente para crear 
                        esta representaci√≥n de la secci√≥n transversal.
                    </div>
                    <div class="canvas-wrapper">
                        <canvas id="canvasProfile"></canvas>
                    </div>
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-value" id="statMaxElev">0</div>
                            <div class="stat-label">Elevaci√≥n M√°x</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statMinElev">0</div>
                            <div class="stat-label">Elevaci√≥n M√≠n</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statDistance">0</div>
                            <div class="stat-label">Distancia (m)</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statSlope">0</div>
                            <div class="stat-label">Pendiente M√°x</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="viz-3d-container glass-card">
                <h3>üèîÔ∏è Modelo Digital de Elevaci√≥n 3D Interactivo</h3>
                <div class="instructions">
                    <strong>üéÆ Controles:</strong> 
                    Clic izquierdo + arrastrar para rotar | 
                    Scroll para zoom | 
                    Pellizcar en m√≥vil para zoom
                </div>
                <div id="canvas3d"></div>
                <div class="controls">
                    <div class="control-group">
                        <label>Estilo de Visualizaci√≥n</label>
                        <select id="renderStyle" onchange="updateRenderStyle()">
                            <option value="elevation">üé® Colores por Elevaci√≥n</option>
                            <option value="slope">üìê An√°lisis de Pendiente</option>
                            <option value="wireframe">üï∏Ô∏è Malla de Alambre</option>
                            <option value="contours3d">üìà Curvas de Nivel 3D</option>
                        </select>
                    </div>
                    <div class="control-group">
                        <label>Resoluci√≥n del Modelo</label>
                        <select id="resolution" onchange="updateTerrain()">
                            <option value="80">Baja (80√ó80)</option>
                            <option value="120">Media (120√ó120)</option>
                            <option value="150" selected>Alta (150√ó150)</option>
                            <option value="200">Ultra (200√ó200)</option>
                        </select>
                    </div>
                </div>
            </div>
        </section>

        <!-- Theory Section -->
        <section id="theory">
            <div class="theory-content">
                <div class="theory-section">
                    <h2>1. Introducci√≥n a las Curvas de Nivel</h2>
                    <p>
                        Las <strong>curvas de nivel</strong>, tambi√©n conocidas como <strong>isohipsas</strong>, son l√≠neas 
                        imaginarias que conectan puntos de igual elevaci√≥n sobre el nivel del mar en la superficie terrestre. 
                        Estas l√≠neas constituyen el m√©todo m√°s com√∫n y efectivo para representar el relieve tridimensional 
                        del terreno en un mapa bidimensional.
                    </p>
                    <p>
                        El concepto de curvas de nivel fue desarrollado en el siglo XVIII por el matem√°tico y cart√≥grafo franc√©s 
                        <strong>Charles de Fourcroy</strong> y perfeccionado posteriormente por ingenieros militares para la 
                        creaci√≥n de mapas topogr√°ficos precisos.
                    </p>
                    
                    <h3>1.1 Definici√≥n Formal</h3>
                    <p>
                        Matem√°ticamente, una curva de nivel es el lugar geom√©trico de todos los puntos P(x, y) del terreno 
                        que satisfacen la ecuaci√≥n:
                    </p>
                    <div class="formula">
                        z = f(x, y) = constante = h
                    </div>
                    <p>
                        Donde <em>z</em> representa la elevaci√≥n, <em>f(x, y)</em> es la funci√≥n que describe la superficie 
                        del terreno, y <em>h</em> es el valor constante de elevaci√≥n para esa curva particular.
                    </p>

                    <div class="highlight-box">
                        <h4>üí° Concepto Clave</h4>
                        <p>
                            Si caminamos siguiendo exactamente una curva de nivel, nunca subiremos ni bajaremos; 
                            mantendremos siempre la misma altitud respecto al nivel del mar.
                        </p>
                    </div>
                </div>

                <div class="theory-section">
                    <h2>2. Propiedades Fundamentales de las Curvas de Nivel</h2>
                    
                    <h3>2.1 Propiedades Geom√©tricas</h3>
                    <p><strong>1. Continuidad:</strong> Las curvas de nivel son l√≠neas continuas que se cierran sobre s√≠ mismas, ya sea dentro o fuera del √°rea del mapa.</p>
                    <p><strong>2. No intersecci√≥n:</strong> Dos curvas de nivel diferentes nunca se cruzan ni se tocan, excepto en casos especiales como acantilados verticales o cuevas.</p>
                    <p><strong>3. Perpendicularidad al gradiente:</strong> Las curvas de nivel son perpendiculares a la l√≠nea de m√°xima pendiente en cada punto.</p>
                    <p><strong>4. Concentricidad en cimas y depresiones:</strong> En puntos altos o bajos aislados, las curvas forman patrones conc√©ntricos cerrados.</p>

                    <h3>2.2 Relaci√≥n con la Pendiente</h3>
                    <p>
                        La separaci√≥n entre curvas de nivel est√° directamente relacionada con la pendiente del terreno:
                    </p>
                    <p><strong>‚Ä¢ Curvas muy juntas:</strong> Indican pendiente pronunciada (terreno escarpado)</p>
                    <p><strong>‚Ä¢ Curvas muy separadas:</strong> Indican pendiente suave (terreno llano)</p>
                    <p><strong>‚Ä¢ Curvas equidistantes:</strong> Indican pendiente constante</p>

                    <div class="formula">
                        Pendiente (%) = (Œîh / d) √ó 100
                        <br><br>
                        Donde: Œîh = diferencia de elevaci√≥n entre curvas
                        <br>       d = distancia horizontal entre curvas
                    </div>

                    <div class="diagram">
                        <svg width="450" height="220" viewBox="0 0 450 220">
                            <defs>
                                <linearGradient id="terrainGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                                    <stop offset="0%" style="stop-color:#00d4aa"/>
                                    <stop offset="100%" style="stop-color:#6366f1"/>
                                </linearGradient>
                                <filter id="glow">
                                    <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
                                    <feMerge>
                                        <feMergeNode in="coloredBlur"/>
                                        <feMergeNode in="SourceGraphic"/>
                                    </feMerge>
                                </filter>
                            </defs>
                            <polygon points="50,160 400,160 400,50 50,130" fill="url(#terrainGrad)" opacity="0.2"/>
                            
                            <line x1="90" y1="155" x2="90" y2="124" stroke="#00d4aa" stroke-width="2" filter="url(#glow)"/>
                            <line x1="150" y1="155" x2="150" y2="110" stroke="#00d4aa" stroke-width="2" filter="url(#glow)"/>
                            <line x1="210" y1="155" x2="210" y2="96" stroke="#00d4aa" stroke-width="2" filter="url(#glow)"/>
                            <line x1="270" y1="155" x2="270" y2="82" stroke="#00d4aa" stroke-width="2" filter="url(#glow)"/>
                            <line x1="330" y1="155" x2="330" y2="68" stroke="#fbbf24" stroke-width="3" filter="url(#glow)"/>
                            <line x1="380" y1="155" x2="380" y2="56" stroke="#00d4aa" stroke-width="2" filter="url(#glow)"/>
                            
                            <line x1="50" y1="160" x2="400" y2="160" stroke="#94a3b8" stroke-width="1"/>
                            
                            <text x="90" y="180" fill="#94a3b8" font-size="11" text-anchor="middle" font-family="Inter">100m</text>
                            <text x="210" y="180" fill="#94a3b8" font-size="11" text-anchor="middle" font-family="Inter">200m</text>
                            <text x="330" y="180" fill="#fbbf24" font-size="11" text-anchor="middle" font-family="Inter">300m</text>
                            <text x="225" y="30" fill="#f1f5f9" font-size="14" text-anchor="middle" font-family="Space Grotesk">Proyecci√≥n de Curvas de Nivel</text>
                        </svg>
                    </div>
                </div>

                <div class="theory-section">
                    <h2>3. Equidistancia y Curvas Maestras</h2>
                    
                    <h3>3.1 Equidistancia</h3>
                    <p>
                        La <strong>equidistancia</strong> es la diferencia de altura constante entre curvas de nivel 
                        consecutivas. La elecci√≥n de la equidistancia depende de la escala del mapa, el tipo de terreno 
                        (monta√±oso vs. llano) y el prop√≥sito del mapa.
                    </p>

                    <div class="highlight-box">
                        <h4>üìè Equidistancias T√≠picas</h4>
                        <table>
                            <tr>
                                <td><strong>Escala 1:25,000</strong></td>
                                <td>5-10 metros</td>
                            </tr>
                            <tr>
                                <td><strong>Escala 1:50,000</strong></td>
                                <td>10-20 metros</td>
                            </tr>
                            <tr>
                                <td><strong>Escala 1:100,000</strong></td>
                                <td>20-50 metros</td>
                            </tr>
                            <tr>
                                <td><strong>Escala 1:250,000</strong></td>
                                <td>50-100 metros</td>
                            </tr>
                        </table>
                    </div>

                    <h3>3.2 Curvas Maestras e Intermedias</h3>
                    <p>Para facilitar la lectura del mapa, las curvas de nivel se clasifican en:</p>
                    <p>
                        <strong>‚Ä¢ Curvas maestras (√≠ndice):</strong> Se representan con trazo m√°s grueso y llevan 
                        indicaci√≥n num√©rica de su altitud. Generalmente aparecen cada 5 curvas.
                    </p>
                    <p>
                        <strong>‚Ä¢ Curvas intermedias (normales):</strong> Trazo m√°s fino, situadas entre las curvas 
                        maestras.
                    </p>
                    <p>
                        <strong>‚Ä¢ Curvas auxiliares:</strong> Trazo discontinuo, usadas para representar detalles 
                        en terrenos muy suaves.
                    </p>
                </div>

                <div class="theory-section">
                    <h2>4. Perfiles Topogr√°ficos</h2>
                    
                    <h3>4.1 Definici√≥n</h3>
                    <p>
                        Un <strong>perfil topogr√°fico</strong> es la representaci√≥n gr√°fica de la secci√≥n vertical del 
                        terreno a lo largo de una l√≠nea determinada. Muestra la variaci√≥n de la elevaci√≥n en funci√≥n 
                        de la distancia horizontal.
                    </p>

                    <h3>4.2 Construcci√≥n del Perfil</h3>
                    <p>El proceso de construcci√≥n de un perfil topogr√°fico sigue estos pasos:</p>
                    <p><strong>1.</strong> Trazar la l√≠nea de corte sobre el mapa de curvas de nivel</p>
                    <p><strong>2.</strong> Identificar los puntos donde la l√≠nea intersecta cada curva de nivel</p>
                    <p><strong>3.</strong> Proyectar cada punto de intersecci√≥n a un sistema de coordenadas donde el eje X representa la distancia horizontal y el eje Y la elevaci√≥n</p>
                    <p><strong>4.</strong> Unir los puntos proyectados para formar el perfil continuo</p>

                    <h3>4.3 Exageraci√≥n Vertical</h3>
                    <p>
                        Frecuentemente se aplica una <strong>exageraci√≥n vertical</strong> al perfil para hacer m√°s 
                        evidentes las variaciones del relieve. Esta se calcula como:
                    </p>
                    <div class="formula">
                        Exageraci√≥n Vertical = Escala Vertical / Escala Horizontal
                    </div>
                    <p>
                        Por ejemplo, si la escala horizontal es 1:10,000 y la vertical es 1:1,000, la exageraci√≥n 
                        vertical es 10x.
                    </p>

                    <div class="highlight-box">
                        <h4>‚ö†Ô∏è Precauci√≥n</h4>
                        <p>
                            La exageraci√≥n vertical distorsiona la percepci√≥n real de las pendientes. Un terreno que 
                            aparece muy escarpado en un perfil exagerado puede ser en realidad bastante suave.
                        </p>
                    </div>
                </div>

                <div class="theory-section">
                    <h2>5. Interpretaci√≥n de Formas del Terreno</h2>
                    
                    <h3>5.1 Formas Topogr√°ficas B√°sicas</h3>
                    
                    <p><strong>üèîÔ∏è Monta√±a o Cerro:</strong></p>
                    <p>Curvas de nivel conc√©ntricas cerradas. Los valores de elevaci√≥n aumentan hacia el centro. Curvas m√°s juntas indican laderas m√°s empinadas.</p>

                    <p><strong>üèûÔ∏è Valle:</strong></p>
                    <p>Curvas de nivel en forma de "V" o "U". El v√©rtice de la V apunta hacia las elevaciones mayores (aguas arriba). Valles en V indican erosi√≥n fluvial activa; en U indican erosi√≥n glaciar.</p>

                    <p><strong>‚õ∞Ô∏è Divisoria de Aguas (Cresta):</strong></p>
                    <p>Curvas en forma de "V" invertida. El v√©rtice apunta hacia las elevaciones menores. Separa cuencas hidrogr√°ficas adyacentes.</p>

                    <p><strong>üï≥Ô∏è Depresi√≥n:</strong></p>
                    <p>Curvas conc√©ntricas cerradas con peque√±as l√≠neas perpendiculares (hachuras) apuntando hacia el centro. Los valores de elevaci√≥n disminuyen hacia el centro.</p>

                    <p><strong>üßó Acantilado:</strong></p>
                    <p>Curvas de nivel muy juntas o pr√°cticamente coincidentes. En casos extremos pueden parecer una sola l√≠nea gruesa.</p>
                </div>

                <div class="theory-section">
                    <h2>6. Modelo Digital de Elevaci√≥n (MDE)</h2>
                    
                    <h3>6.1 Definici√≥n</h3>
                    <p>
                        Un <strong>Modelo Digital de Elevaci√≥n (MDE)</strong> o DEM (Digital Elevation Model) es una 
                        representaci√≥n digital de la superficie del terreno. Consiste en una matriz de celdas donde 
                        cada celda almacena un valor de elevaci√≥n.
                    </p>

                    <h3>6.2 Tipos de MDE</h3>
                    <p>
                        <strong>‚Ä¢ MDE Raster:</strong> Matriz regular de celdas cuadradas, cada una con un valor de 
                        elevaci√≥n. Es el formato m√°s com√∫n.
                    </p>
                    <p>
                        <strong>‚Ä¢ TIN (Triangulated Irregular Network):</strong> Red de tri√°ngulos irregulares que 
                        se adaptan mejor a terrenos complejos.
                    </p>

                    <h3>6.3 Obtenci√≥n de Datos</h3>
                    <p>Los MDE se pueden generar mediante: digitalizaci√≥n e interpolaci√≥n de curvas de nivel existentes, levantamientos topogr√°ficos directos con estaci√≥n total o GPS, fotogrametr√≠a a√©rea o satelital, LiDAR (Light Detection and Ranging), y radar de apertura sint√©tica (InSAR).</p>

                    <h3>6.4 An√°lisis Derivados</h3>
                    <p>A partir de un MDE se pueden calcular:</p>
                    <p><strong>‚Ä¢ Pendiente:</strong> √Ångulo de inclinaci√≥n del terreno</p>
                    <p><strong>‚Ä¢ Orientaci√≥n (Aspecto):</strong> Direcci√≥n hacia donde "mira" la ladera</p>
                    <p><strong>‚Ä¢ Curvatura:</strong> Forma convexa o c√≥ncava del terreno</p>
                    <p><strong>‚Ä¢ Sombreado:</strong> Simulaci√≥n de iluminaci√≥n solar</p>
                    <p><strong>‚Ä¢ Visibilidad:</strong> An√°lisis de cuencas visuales</p>
                    <p><strong>‚Ä¢ Hidrolog√≠a:</strong> Direcci√≥n de flujo, acumulaci√≥n, cuencas</p>
                </div>

                <div class="theory-section">
                    <h2>7. Aplicaciones Pr√°cticas</h2>
                    
                    <h3>7.1 Ingenier√≠a Civil</h3>
                    <p>Dise√±o de carreteras y v√≠as f√©rreas, planificaci√≥n de movimientos de tierra, dise√±o de sistemas de drenaje, y estudios de estabilidad de taludes.</p>

                    <h3>7.2 Hidrolog√≠a</h3>
                    <p>Delimitaci√≥n de cuencas hidrogr√°ficas, modelaci√≥n de inundaciones, dise√±o de presas y embalses, y estudios de erosi√≥n.</p>

                    <h3>7.3 Planificaci√≥n Urbana</h3>
                    <p>Zonificaci√≥n de √°reas constructibles, an√°lisis de riesgos naturales, y planificaci√≥n de servicios p√∫blicos.</p>

                    <h3>7.4 Otras Aplicaciones</h3>
                    <p>Navegaci√≥n y orientaci√≥n, estudios ambientales y ecol√≥gicos, arqueolog√≠a, agricultura de precisi√≥n, y telecomunicaciones (an√°lisis de cobertura).</p>
                </div>

                <div class="theory-section">
                    <h2>8. F√≥rmulas y C√°lculos Importantes</h2>
                    
                    <h3>8.1 C√°lculo de Pendiente</h3>
                    <div class="formula">
                        Pendiente (%) = (Œîz / Œîd) √ó 100
                        <br>
                        Pendiente (¬∞) = arctan(Œîz / Œîd)
                        <br><br>
                        Donde: Œîz = diferencia de elevaci√≥n
                        <br>       Œîd = distancia horizontal
                    </div>

                    <h3>8.2 Interpolaci√≥n de Elevaciones</h3>
                    <p>Para estimar la elevaci√≥n de un punto entre dos curvas de nivel:</p>
                    <div class="formula">
                        z = z‚ÇÅ + (d‚ÇÅ / D) √ó (z‚ÇÇ - z‚ÇÅ)
                        <br><br>
                        Donde: z‚ÇÅ, z‚ÇÇ = elevaciones de las curvas adyacentes
                        <br>       d‚ÇÅ = distancia del punto a la curva z‚ÇÅ
                        <br>       D = distancia total entre las dos curvas
                    </div>

                    <h3>8.3 Gradiente del Terreno</h3>
                    <div class="formula">
                        ‚àáz = (‚àÇz/‚àÇx, ‚àÇz/‚àÇy)
                        <br>
                        |‚àáz| = ‚àö[(‚àÇz/‚àÇx)¬≤ + (‚àÇz/‚àÇy)¬≤]
                        <br><br>
                        La direcci√≥n del gradiente indica la m√°xima pendiente ascendente.
                    </div>
                </div>

                <div class="theory-section">
                    <h2>9. Referencias y Bibliograf√≠a</h2>
                    <p>‚Ä¢ Burrough, P.A. & McDonnell, R.A. (1998). <em>Principles of Geographical Information Systems</em>. Oxford University Press.</p>
                    <p>‚Ä¢ Robinson, A.H. et al. (1995). <em>Elements of Cartography</em>. John Wiley & Sons.</p>
                    <p>‚Ä¢ Li, Z., Zhu, Q. & Gold, C. (2005). <em>Digital Terrain Modeling: Principles and Methodology</em>. CRC Press.</p>
                    <p>‚Ä¢ Instituto Geogr√°fico Nacional. <em>Manual de Cartograf√≠a Topogr√°fica</em>.</p>
                    <p>‚Ä¢ USGS. <em>Map Accuracy Standards and Specifications</em>.</p>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p class="author">Elaborado por John Leonardo Cabrera Esp√≠ndola</p>
        <p class="author-subtitle">Visualizaci√≥n Topogr√°fica Interactiva ‚Ä¢ 2024</p>
    </footer>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>
